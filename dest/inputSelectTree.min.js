/*! inputselecttree - v1.0.0 - 2015-12-09 */!function(a,b){var c=function(a){var b=this;b.setting={target:"",api:"",idkey:"flowId",triggerHandler:function(){},data:[]},b.extend(b.setting,a),b.initData(),b.addEvent()};c.prototype={constructor:c,set:function(a,b){this.setting[a]=b},get:function(a){return this.setting[a]},extend:function(a,b){if("object"==typeof b)for(var c in b)a[c]=b[c]},initData:function(){var a=this;this.get("data").length>=1?this.bulid(this.get("data")):b.ajax({url:this.get("api"),type:"post",dataType:"json",success:function(c){b.isArray(c)?a.bulid(c):b.isArray(c.data)?a.bulid(c.data):alert("数据不正确")}})},bulid:function(a){function b(a){var c="";if(a.length<=0)return"";c+="<ul class='list-group list-wrap'>";for(var d=0;d<a.length;d++){var h=a[d].children,i="",j=a[d][e];h?(i=b(h),f=""):f=" list-child",g["tree_"+j]=a[d],c+="<li><div class='treeNode"+f+"' id='tree_"+j+"'><span class='tree-status tree-ext'></span><span class='tree-ico tree-ext-folder'></span><span class='tree-title'>"+a[d].text+"</span>"+i+"</div></li>"}return c+="</ul>"}var c=this,d=c.get("target"),e=c.get("idkey"),f="",g={};d.after('<input name="treeHideData" type="hidden" /><div class="inputTree hide">'+b(a)+"</div>"),d.data({nodeDate:g})},addEvent:function(){var a=this,c=a.get("target"),d=c.nextAll(".inputTree");d.on("click",".tree-status",function(a){a.preventDefault();var c=b(this);c.hasClass("tree-ext")?c.nextAll("ul").addClass("hide").removeClass("show").end().removeClass("tree-ext").addClass("tree-shut").next().removeClass("tree-ext-folder").addClass("tree-shut-folder"):c.nextAll("ul").addClass("show").removeClass("hide").end().addClass("tree-ext").removeClass("tree-shut").next().addClass("tree-ext-folder").removeClass("tree-shut-folder")}).on("click",".tree-title",function(e){e.preventDefault();var f=b(this),g=f.closest(".treeNode").attr("id"),h=c.data().nodeDate,i=h[g];c.val(f.text()),d.addClass("hide"),a.get("triggerHandler")(i,h)}),c.on("focus",function(a){a.preventDefault(),d.removeClass("hide")})}},b.fn.inputSelectTree=function(a){return a.target=this,this.data(new c(a)),this}}(window,jQuery);